#!/bin/bash

echo "ğŸ§ª Running tests before commit..."

cd "$(git rev-parse --show-toplevel)/app" || exit 1

pytest tests/ -v --tb=short

TEST_EXIT_CODE=$?

if [ $TEST_EXIT_CODE -ne 0 ]; then
    echo ""
    echo "âŒ Tests failed! Commit aborted."
    echo "Fix the failing tests and try again."
    exit 1
fi

echo ""
echo "âœ… All tests passed! Proceeding with commit..."
exit 0
